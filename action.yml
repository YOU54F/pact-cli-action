name: pact-cli
description: A standalone pact command line executable using the ruby pact implementation and Traveling Ruby
runs:
  using: "composite"
  steps:
    - run: brew install you54f/pact/pact_broker
      if: runner.os == 'linux' || runner.os == 'macos'
      shell: bash
    - run: |
        iex "& {$(irm get.scoop.sh)} -RunAsAdmin"
        "$HOME\scoop\shims\" >> $env:GITHUB_PATH
      name: install scoop
      shell: powershell
      if: runner.os == 'windows'
    - run: |
        scoop bucket add pact https://github.com/you54f/scoop
        scoop install pact-broker
      if: runner.os == 'windows'
      shell: powershell
    - run: ${{ github.action_path }}/cli.sh
      shell: bash
    - run: |
        "$pwd\pact\bin\" >> $env:GITHUB_PATH
      if: runner.os == 'windows'
      shell: powershell